<mat-card class="trinta-card add-norm-card mb-25 bg-white border-none d-block">
    <mat-card-header>
        <mat-card-title>
            <h5 class="mt-0 mb-0">Agregar Norma</h5>
        </mat-card-title>
    </mat-card-header>

    <mat-card-content>
        <form [formGroup]="normForm" (ngSubmit)="submit()" class="norm-form">
            <div class="row align-items-center">
                <!-- Código -->
                <!-- ===== Datos básicos =============================================== -->
                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Código</label>
                    <mat-form-field class="w-100">
                        <i-feather name="hash"></i-feather>
                        <mat-label>Código</mat-label>
                        <input matInput formControlName="code"/>

                        @if (normForm.get('code')?.hasError('required')) {
                            <mat-error>El código es obligatorio.</mat-error>
                        }
                    </mat-form-field>
                </div>

                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Título (ES)</label>
                    <mat-form-field class="w-100">
                        <i-feather name="book"></i-feather>
                        <mat-label>Título</mat-label>
                        <input matInput formControlName="title"/>
                        @if (normForm.get('title')?.hasError('required')) {
                            <mat-error>El título es obligatorio.</mat-error>
                        }
                    </mat-form-field>
                </div>

                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Título (EN)</label>
                    <mat-form-field class="w-100">
                        <i-feather name="book-open"></i-feather>
                        <mat-label>Título (EN)</mat-label>
                        <input matInput formControlName="title_en"/>
                    </mat-form-field>
                </div>

                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Organización</label>
                    <mat-form-field class="w-100">
                        <i-feather name="layers"></i-feather>
                        <mat-label>Organización</mat-label>
                        <input matInput formControlName="organization"/>
                    </mat-form-field>
                </div>

                <!-- ===== Versión, edición, páginas =================================== -->
                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Año versión</label>
                    <mat-form-field class="w-100">
                        <i-feather name="calendar"></i-feather>
                        <mat-label>Año versión</mat-label>
                        <input
                            matInput
                            type="number"
                            min="1900"
                            max="2099"
                            step="1"
                            formControlName="version_year"
                            maxlength="4"
                        />
                        @if (normForm.get('version_year')?.invalid) {
                            <mat-error>Año de 4 dígitos.</mat-error>
                        }
                    </mat-form-field>
                </div>

                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Edición</label>
                    <mat-form-field class="w-100">
                        <i-feather name="edit"></i-feather>
                        <mat-label>Edición</mat-label>
                        <input matInput formControlName="edition"/>
                    </mat-form-field>
                </div>

                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Páginas</label>
                    <mat-form-field class="w-100">
                        <i-feather name="file-text"></i-feather>
                        <mat-label>Páginas</mat-label>
                        <input matInput type="number" min="1" formControlName="pages"/>
                        @if (normForm.get('pages')?.invalid) {
                            <mat-error>Introduzca un número válido.</mat-error>
                        }
                    </mat-form-field>
                </div>

                <!-- ===== Publicación y multimedia ==================================== -->
                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Fecha publicación</label>
                    <mat-form-field class="w-100">
                        <i-feather name="clock"></i-feather>
                        <mat-label>Fecha publicación</mat-label>
                        <input matInput type="date" formControlName="publication_date"/>
                        @if (normForm.get('publication_date')?.hasError('required')) {
                            <mat-error>Requerido.</mat-error>
                        }
                    </mat-form-field>
                </div>

                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Video (URL)</label>
                    <mat-form-field class="w-100">
                        <i-feather name="video"></i-feather>
                        <mat-label>Video</mat-label>
                        <input matInput formControlName="video_link"/>
                        @if (normForm.get('video_link')?.invalid) {
                            <mat-error>URL no válida.</mat-error>
                        }
                    </mat-form-field>
                </div>

                <!-- ===== Clasificación y comité ====================================== -->
                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Categoría</label>
                    <mat-form-field class="w-100">
                        <i-feather name="tag"></i-feather>
                        <mat-label>Categoría</mat-label>
                        <mat-select formControlName="category">
                            <mat-option
                                *ngFor="let c of categoryOptions"
                                [value]="c.value"
                            >
                                {{ c.label }}
                            </mat-option>
                        </mat-select>
                        @if (normForm.get('category')?.hasError('required')) {
                            <mat-error>Obligatorio.</mat-error>
                        }
                    </mat-form-field>
                </div>

                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Comité</label>
                    <mat-form-field class="w-100">
                        <i-feather name="users"></i-feather>
                        <mat-label>Comité</mat-label>
                        <input matInput formControlName="committee"/>
                    </mat-form-field>
                </div>

                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Subcomité</label>
                    <mat-form-field class="w-100">
                        <i-feather name="list"></i-feather>
                        <mat-label>Subcomité</mat-label>
                        <input matInput formControlName="subcommittee"/>
                    </mat-form-field>
                </div>

                <!-- ===== Extras ====================================================== -->
                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Ref. Perú</label>
                    <mat-form-field class="w-100">
                        <i-feather name="flag"></i-feather>
                        <mat-label>Referencia Perú</mat-label>
                        <input matInput formControlName="ref_peru"/>
                    </mat-form-field>
                </div>

                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Aprobado por</label>
                    <mat-form-field class="w-100">
                        <i-feather name="user-check"></i-feather>
                        <mat-label>Aprobado por</mat-label>
                        <input matInput formControlName="approved_by"/>
                    </mat-form-field>
                </div>

                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">Reemplazado por</label>
                    <mat-form-field class="w-100">
                        <i-feather name="corner-down-right"></i-feather>
                        <mat-label>Reemplazado por</mat-label>
                        <input matInput formControlName="replaced_by"/>
                    </mat-form-field>
                </div>

                <div class="col-lg-6">
                    <label class="label d-block fw-medium mb-10">ICS</label>
                    <mat-form-field class="w-100">
                        <i-feather name="bar-chart-2"></i-feather>
                        <mat-label>ICS</mat-label>
                        <input matInput formControlName="ics"/>
                    </mat-form-field>
                </div>

                <!-- ===== Textos largos ============================================== -->
                <div class="col-lg-12">
                    <label class="label d-block fw-medium mb-10">Descripción</label>
                    <mat-form-field class="w-100">
                        <i-feather name="align-left"></i-feather>
                        <mat-label>Descripción</mat-label>
                        <textarea matInput rows="3" formControlName="description"></textarea>
                    </mat-form-field>
                </div>

                <div class="col-lg-12">
                    <label class="label d-block fw-medium mb-10">Resumen</label>
                    <mat-form-field class="w-100">
                        <i-feather name="info"></i-feather>
                        <mat-label>About</mat-label>
                        <textarea matInput rows="3" formControlName="about"></textarea>
                    </mat-form-field>
                </div>

                <div class="col-lg-12">
                    <label class="label d-block fw-medium mb-10">Notas</label>
                    <mat-form-field class="w-100">
                        <i-feather name="edit-3"></i-feather>
                        <mat-label>Notas</mat-label>
                        <textarea matInput rows="2" formControlName="notes"></textarea>
                    </mat-form-field>
                </div>
                <div class="col-12">
                    <button mat-raised-button color="primary" type="submit" [disabled]="normForm.invalid">
                        Guardar
                    </button>
                </div>
            </div>
        </form>

    </mat-card-content>
</mat-card>
