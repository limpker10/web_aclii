<mat-card class="trinta-card friends-card mb-25 bg-white border-none d-block">
    <mat-card-header>
        <mat-card-title>
            <h5 class="mt-0 mb-0">Ítems de la Norma</h5>
        </mat-card-title>
    </mat-card-header>

    <mat-card-content>
        <mat-accordion>
            @for (item of items(); track item.id) {
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title class="title">
                            <img
                                [src]="'https://ui-avatars.com/api/?name=' + encodeURIComponent(item.name)"
                                alt="user-avatar"
                            >
                            <mat-divider style="margin: 0px 2px"></mat-divider>
                            <h6>{{ item.name }}</h6>
                        </mat-panel-title>

                    </mat-expansion-panel-header>

                    <div class="d-flex flex-wrap gap-2 mt-2">
                        @for (sub of item.subitems; track sub.id) {
                            <span
                                class="custom-subitem px-2 d-inline-flex rounded"
                                [ngClass]="{ 'active': isSelected(sub.id!) }"
                                (click)="selectSubitem(sub.id!)">
                                <mat-icon>chevron_right</mat-icon>
                                <mat-divider style="margin: 0px 2px"></mat-divider>
                                {{ sub.name }}
                            </span>
                        }
                    </div>
                </mat-expansion-panel>
            }

            @if (!items || items().length === 0) {
                <div class="text-center text-muted mt-3">
                    No hay ítems registrados para esta norma.
                </div>
            }
        </mat-accordion>
    </mat-card-content>
</mat-card>
